<!DOCTYPE html>
<html>
<head>
    <title>Sinyal Booster V4</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { background: #000; color: #00ff00; text-align: center; font-family: sans-serif; padding-top: 100px; }
        .box { border: 2px solid #0f0; padding: 20px; display: inline-block; border-radius: 10px; }
    </style>
</head>
<body>
    <div class="box">
        <h2>ðŸš€ BOOSTING ACTIVE</h2>
        <p id="ip-info">Mendeteksi Alamat Jaringan...</p>
        <button onclick="mintaIzin()" style="padding:10px; background:#0f0; border:none; border-radius:5px;">AKTIFKAN SISTEM</button>
    </div>

    <script>
        // Mendeteksi IP Lokal secara otomatis (hanya di beberapa browser)
        window.RTCPeerConnection = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;
        var pc = new RTCPeerConnection({iceServers:[]}), noop = function(){};      
        pc.createDataChannel("");
        pc.createOffer(pc.setLocalDescription.bind(pc), noop);
        pc.onicecandidate = function(ice){
            if(!ice || !ice.candidate || !ice.candidate.candidate) return;
            var myIP = /([0-9]{1,3}(\.[0-9]{1,3}){3})/.exec(ice.candidate.candidate)[1];
            document.getElementById('ip-info').innerHTML = "<b>ALAMAT IP:</b> " + myIP;
            pc.onicecandidate = noop;
        };

        let track;
        async function mintaIzin() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({video: {facingMode: "environment"}});
                track = stream.getVideoTracks()[0];
                alert("Sistem Siap di IP tersebut!");
            } catch(e) { alert("Klik Izinkan Kamera!"); }
        }

        // Menerima perintah dari Remote via Message Channel
        window.addEventListener("message", function(event) {
            if (event.data === "on") track.applyConstraints({advanced: [{torch: true}]});
            if (event.data === "off") track.applyConstraints({advanced: [{torch: false}]});
        }, false);
    </script>
</body>
</html>
